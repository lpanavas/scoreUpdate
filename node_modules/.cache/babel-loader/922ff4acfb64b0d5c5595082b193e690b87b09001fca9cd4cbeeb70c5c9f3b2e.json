{"ast":null,"code":"import _toConsumableArray from\"C:/Users/lpana/OneDrive/Documents/gameIterations/scoreUpdate/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/lpana/OneDrive/Documents/gameIterations/scoreUpdate/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import Dialogue from\"../components/Dialogue\";import Choices from\"../components/Choices\";import\"../components/styles/StoryPage.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function StoryPage(_ref){var storyPath=_ref.storyPath,finishStory=_ref.finishStory;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),storyData=_useState2[0],setStoryData=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),currentScene=_useState4[0],setCurrentScene=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),dialogues=_useState6[0],setDialogues=_useState6[1];useEffect(function(){setStoryData(storyPath);setCurrentScene(storyPath.start);},[storyPath]);useEffect(function(){var scene=storyData===null||storyData===void 0?void 0:storyData.scenes[currentScene];if(scene){setDialogues(function(oldDialogues){return[].concat(_toConsumableArray(oldDialogues),[{role:scene.role,text:scene.scene}]);});}},[storyData,currentScene]);var handleChoiceClick=function handleChoiceClick(index){setDialogues(function(oldDialogues){return[].concat(_toConsumableArray(oldDialogues),[{role:\"choice\",text:scene.choices[index].option}]);});var nextScene=scene.next;if(nextScene.type===\"game\"){finishStory(nextScene.key);}else{setCurrentScene(nextScene);}};if(!storyData)return\"Loading...\";var scene=storyData.scenes[currentScene];return/*#__PURE__*/_jsxs(\"div\",{className:\"story-page\",children:[dialogues.map(function(dialogue,index){return/*#__PURE__*/_jsx(Dialogue,{role:dialogue.role,text:dialogue.text},index);}),scene&&scene.choices&&/*#__PURE__*/_jsx(Choices,{choices:scene.choices,onClick:handleChoiceClick})]});}export default StoryPage;","map":{"version":3,"names":["React","useEffect","useState","Dialogue","Choices","jsx","_jsx","jsxs","_jsxs","StoryPage","_ref","storyPath","finishStory","_useState","_useState2","_slicedToArray","storyData","setStoryData","_useState3","_useState4","currentScene","setCurrentScene","_useState5","_useState6","dialogues","setDialogues","start","scene","scenes","oldDialogues","concat","_toConsumableArray","role","text","handleChoiceClick","index","choices","option","nextScene","next","type","key","className","children","map","dialogue","onClick"],"sources":["C:/Users/lpana/OneDrive/Documents/gameIterations/scoreUpdate/src/pages/StoryPage.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Dialogue from \"../components/Dialogue\";\r\nimport Choices from \"../components/Choices\";\r\nimport \"../components/styles/StoryPage.css\";\r\n\r\nfunction StoryPage({ storyPath, finishStory }) {\r\n  const [storyData, setStoryData] = useState(null);\r\n  const [currentScene, setCurrentScene] = useState(\"\");\r\n  const [dialogues, setDialogues] = useState([]);\r\n\r\n  useEffect(() => {\r\n    setStoryData(storyPath);\r\n    setCurrentScene(storyPath.start);\r\n  }, [storyPath]);\r\n\r\n  useEffect(() => {\r\n    const scene = storyData?.scenes[currentScene];\r\n\r\n    if (scene) {\r\n      setDialogues((oldDialogues) => [\r\n        ...oldDialogues,\r\n        { role: scene.role, text: scene.scene },\r\n      ]);\r\n    }\r\n  }, [storyData, currentScene]);\r\n\r\n  const handleChoiceClick = (index) => {\r\n    setDialogues((oldDialogues) => [\r\n      ...oldDialogues,\r\n      { role: \"choice\", text: scene.choices[index].option },\r\n    ]);\r\n    const nextScene = scene.next;\r\n    if (nextScene.type === \"game\") {\r\n      finishStory(nextScene.key);\r\n    } else {\r\n      setCurrentScene(nextScene);\r\n    }\r\n  };\r\n\r\n  if (!storyData) return \"Loading...\";\r\n\r\n  const scene = storyData.scenes[currentScene];\r\n\r\n  return (\r\n    <div className=\"story-page\">\r\n      {dialogues.map((dialogue, index) => (\r\n        <Dialogue key={index} role={dialogue.role} text={dialogue.text} />\r\n      ))}\r\n      {scene && scene.choices && (\r\n        <Choices choices={scene.choices} onClick={handleChoiceClick} />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default StoryPage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}